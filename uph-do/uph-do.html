<script type="text/javascript">
    (function () {    
        function ws_validateclient() {
            return RED.nodes.node(this.client) != null;
        }

        function ws_label() {
            var wsNode = RED.nodes.node(this.client);
            return this.name ||( wsNode? wsNode.label() + ":do#" + this.number: "uph-do");
        }

        RED.nodes.registerType('uph-do',{
            category: 'upyhome',
            defaults: {
                name: {value: ""},
                client: {type:"uph-client", validate: ws_validateclient},
                number: {value: "0"}
            },
            color:"rgb(215, 215, 160)",
            inputs: 0,
            outputs: 1,
            icon: "white-globe.svg",
            labelStyle: function() {
                return this.name?"node_label_italic":"";
            },
            label: ws_label
            //oneditsave: ws_oneditsave,
            //oneditprepare: ws_oneditprepare
        });
    })();
</script>

<script type="text/html" data-template-name="uph-do">


    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-client"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.url"></span></label>
        <input type="text" id="node-input-client">
    </div>
    <div class="form-row">
        <label for="node-input-number"><i class="fa fa-bookmark"></i> Number</label>
        <input type="text" id="node-input-number">
    </div>
</script>